---
layout: post
title:  "[ML] 통계분석 기초"
date:   2020-05-14 17:13:04
author: zeroaan
categories: machine_learning
# tags: python code
# cover:  "/assets/header_image.jpg"
---

분석을 하면서 가설을 미리 세우고 유의미한 값인지 판단하는 p 값으로 분석 결과를 나타낼 수 있다.<br>
**가설**이란 아직 검증되지 않은 추측적 예비 이론을 말한다.

분석 방법은 변수 종류가 **범주형 변수**인지 **연속형 변수**인지에 따라 달라진다.

변수 역시 영향을 주는 독립변수와 영향을 받는 종속변수 두 가지가 있으므로 이 조합에 따라 분석 방법이 달라진다.

![데이터분석변수]({{site.baseurl}}/img/데이터분석변수.jpg)

예를 들어 직업이 몸무게에 미치는 영향이 있는지 분석한다면 영향을 주는 변수는 직업이고 영향을 받는 변수는 몸무게이다.

이때 직업은 범주형 변수이고 몸무게는 연속형 변수이므로 t 검정과 분산분석을 수행할 수 있는데<br>
분산분석은 영향을 받는 변수의 집단이 세 개이상일 때 사용하므로 여기서는 t 검정을 통해 분석한다.

<br>

## 통계분석 기법
통계분석은 의미 있는 결과를 얻기 위해 양적인 자료들을 정리하여 **분석 및 해석하는 과학적 방법**이다.<br>
수량화할 수만 있다면, 생활 주변에서 일어나는 여러 가지 현상이 통계분석 기법을 통해 의미를 얻게 된다.

<br>

### 요약통계
R에서 summary 함수 하나만으로 벡터, 행렬, 요인, 데이터 프레임 등에 대해 최솟값, 최댓값, 중앙값, 평균 등 기본적이면서도 유용한 통계치를 모두 보여준다.

다만 summary 함수로는 표준편차나 산점도 등 다른 정보는 알 수 없다. 기본적인 통계치들만 보여주는 함수로 기억하자.

<br>

### 가설검정: 귀무가설, 대립가설, p 값
귀무가설은 '영가설'이라고도 불리는데 쉽게 말해 **아무것도 일어나지 않는다는 의미**다.<br>
예를들어 '직업에 따라 몸무게에 차이가 없을 것이다', '나이에 따라 키 차이가 없을 것이다' 등을 볼 수 있다.

반대로 대립가설은 **무언가 일어났다는 의미**이다.<br>
예를들어 '직업에 따라 몸무게에 차이가 있을 것이다', '나이에 따라 키 차이가 있을 것이다' 등 새로운 내용을 주장한다.

상관관계가 '있다', '없다'의 기준이 되고 **오류를 허용할 범위를 설정하는 값**을 유의수준이라 한다.<br>
쉽게 말해 유의수준 0.1은 90% 믿을 수 있다는 뜻으로 생각하면 되고, 이를 신뢰수준이 90%라고 표현하기도 한다.<br>
유의수준이 작아질수록 신뢰수준은 높아진다. 즉, **유의수준 0.05는 95%의 신뢰수준**을 의미한다.

유의수준을 얼마로 정할지는 때에 따라 다르다. 현실적으로 주어진 분석 목적에 따라 달라지기 때문이다.<br>
대부분은 관습적으로 0.05의 유의수준(95% 신뢰수준)을 사용하지만,<br>
데이터에 노이즈가 많다면 0.1의 유의수준을 사용하기도 하고,<br>
고위험 분야에서는 0.01의 유의수준이 필요할 수도 있다.

통계분석 결과 중 가장 중요한 것은 **오류가 나올 수 있는 확률**인 유의확률이며, 이를 나타내는 수치가 **p-value** 이다.<br>
유의수준과 분석 결과 나온 p 값을 비교하여 가설을 평가하는 것이 바로 **가설검정**이다.

예를 들어 평소에 늘 짜장면을 먹다가 언젠가부터 맛이 없어진 것 같아 짬뽕이 먹고 싶어졌다고 하자.<br>
이러한 생각이 의미 있는지 가설을 검정해보려 귀무가설과 대립가설을 세우면 다음과 같다.

- 귀무가설 : 짜장면과 짬뽕의 맛은 동일하다.
- 대립가설 : 짬뽕이 짜장면보다 맛있다.

유의수준은 0.05로 결정했다고 하자. 이제 실제로 데이터를 수집해 컴퓨터로 계산한 결과 p값이 0.03이 나왔다고 하자.<br>
그러면 p 값이 유의수준 0.05보다 작다. 이 경우 귀무가설은 기각되고 대립가설이 채택된다.<br>
즉 짬뽕이 더 맛있으므로 짬뽕을 먹겠다는 새로운 주장이 통계적으로 맞게 된다.

<br>

### 평균과 표준편차
기술통계는 확보한 데이터를 이해하기 쉬운 수치나 그래프 등으로 정리하는 일을 말한다.

평균은 **모든 값의 합을 데이터의 개수로 나눈 값**이다.<br>
표준편차는 **데이터가 얼마나 넓게 퍼져 있는가**를 나타내는 값이다.(분산에 루트를 씌운 값이다)<br>
분산은 **각 데이터에서 평균을 뺀 뒤 제곱한 값을 모두 더한 후 데이터 개수로 나눈 값**이다.

예를 들어 5명의 학생이 100점 만점의 국어와 수학 시험을 봤고 점수는 다음과 같았다고 하자.
- 국어 : 50, 60, 70, 80, 90
- 수학 : 90, 95, 100, 95, 90

이 경우 국어는 50점부터 90점까지 점수가 넓게 퍼져 있으므로 표준편자가 크고,<br>
수학은 90점부터 100점까지 점수가 좁게 퍼져 있으므로 표준편차가 작을 것으로 예상할 수 있다.

국어 시험은 평균이 작고 표준편차가 크므로 시험이 어려웠다고 볼 수 있고,<br>
수학은 평균이 크고 표준편차가 작으므로 전반적으로 시험이 쉬웠다고 볼 수 있다.

<br>

### 빈도 분석
빈도 분석은 실생활에서 흔히 사용하듯 숫자를 세어 **퍼센트화**한 것을 말한다.<br>
조금 어렵게 표현하면 범주형 데이터의 불연속적인 빈도를 계산하는 일이다.

예를 들어 남자, 여자를 성별로 남자 25%, 여자 75%로 나누어 볼 수 있고,<br>
나이 빈도로 20대 60%, 30대 25%, 40대 15%로 그룹화하여 범주형 변수로 빈도 분석을 할 수 있다.

<br>

### 분위수와 사분위수
0과 1 사이의 데이터를 100% 백분위수로 정렬하면 1은 100%에 해당하는 값이다.<br>
0.5인 경우 백분위수는 50%이며 중앙값에 해당된다.

백분율을 사용하지 않는 경우는 분위수라 하며,<br>
흔히 사용하는 사분위수는 데이터를 순서대로 정렬할 때 25%(Q1), 50%(Q2), 75%(Q3) 등에 해당하는 값을 의미한다.

이때 **25%는 제1사분위수, 50%는 제2사분위수, 75%는 제3사분위수**라 한다.

<br>

## 정규분포와 정규성 검정
정규분포란 **데이터들이 평균을 기준으로 좌우 대칭형으로 분포되어 있는 형태**를 말한다.

세상의 수많은 현상은 대부분 정규분포를 따른다고 한다.<br>
간단히 말해 정규분포는 어떤 데이터에 대해서도 적용되는 확률분포라고 보면 된다.

![정규분포]({{site.baseurl}}/img/정규분포.jpg)

<br>

### 표준정규분포 곡선
확률변수 X가 정규분포 N(m, a^2)을 따를 때, 새로운 변수 Z = (X-m) / a 로 변환하면 Z의 확률분포는 표준정규분포 N(0, 1^2)을 따르게 된다.

정규분포 N(m, a^2)를 따르는 확률변수 X를 표준정규분포 N(0, 1^2)을 따르는 새로운 확률변수 Z로 전환시켜주는 것을 표준화한다고 말한다.

예를 들어 키, 몸무게, 성적 같은 일반적인 자연현상은 정규분포를 따른다고 할 수 있다.<br>
정규분포 형태의 곡선만 비교한다면 대한민국 20대 남자의 키 평균은 174cm 이고 표준편차는 4cm 이므로 170~178cm인 사람이 약 68.3%가 된다.

![키정규분포]({{site.baseurl}}/img/키정규분포.jpg)

<br>

### 샤피로-윌크 검정
샤피로-윌크 검정은 **난수 데이터의 정규분포 검정**을 위해 R에서 사용되는 표준 정규성 검정 함수이다.

검정 결과 p 값이 0.002287로 나오면 0.05보다 작게 나왔으므로 생성한 샘플 데이터는 정규분포를 따르는 데이터라고 할 수 있다.<br>
물론 난수 데이터이므로 정규분포를 따르지 않는 데이터가 생성될 수도 있다.

<br>

## 데이터 검정
데이터 검정은 분석할 데이터가 분석 목적과 기준에 맞는 데이터인지 확인하는 방법이다.<br>
데이터의 형태에 따라 검정 기법은 달라질 수 있다.

<br>

### 카이제곱검정
카이제곱검정은 **두 범주형 변수의 관계를 분석하고 검정하는 것**을 말한다.<br>
좀 더 자세히 말하면 집단에 따라서 비율에 차이가 있는지 확인하기 위한 분석 방법이다.

카이제곱검정에서는 검정통계량 X^2 의 값들이 카이제곱분포를 따른다.<br>
카이제곱검정은 교차표를 통해 결과를 보기 때문에 교차표 분석이라고도 한다.

카이제곱검정은 범주형 잘가 범주형 자료에 어떤 영향을 미치는지 분석할 때 사용된다.<br>
즉, **영향을 주는 변수, 영향을 받는 변수가 모두 범주형 자료**일 때 사용되는 분석 방법이다.

<br>

### t 검정

t 검정은 **범주형 변수(집단이 2개)에 따른 연속형 변수의 차이**를 확인할 때 사용된다.<br>
즉, 두 집단의 평균을 비교했을 때 차이가 있는지 확인하기 위한 분석 방법이다.

앞서 다룬 카이제곱검정은 비율의 차이를 검정하기 위한 것이고 t 검정은 평균의 차이를 검정하기 위한 것이다.

<br>

### 분산 분석

분산분석은 **범주형 변수(집단이 3개 이상)에 따른 연속형 변수의 차이**를 확인할 때 사용된다.<br>
즉, 3개 이상 집단의 평균을 비교하고자 할 때 차이가 있는지 확인하기 위한 분석 방법이다.

사실 비교 집단이 2개일 때도 사용할 수 있지만 이때는 t 검정을 사용하는 게 일반적이다.

<br>

> 참고 자료 : 그것이 R고 싶다(한빛미디어, 양중기)